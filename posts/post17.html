<!doctype html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="../icons/logoTit.png">
    <link rel="stylesheet" href="../estilo.css">
    <title>UB Social</title>
</head>
<body>
<div class="container-fluid">


    <div class="row">
        <div class="col-sm-12">
            <nav class="navbar rounded-bottom fixed-top navbar-expand-lg navbar-light bg-light shadow">
                <div class="container-fluid">
                    <a class="navbar-brand" href="../index.html"><img src="../icons/logo.png" class="d-inline-block align-text-top" width="11pt"> UB Social</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav">
                            <li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
                            <li class="nav-item"><a class="nav-link" href="../sobre/sobre.html">Sobre</a></li>
                            <li class="nav-item"><a class="nav-link" href="../cursos.html" id="navCursos">Cursos</a></li>
                            <li class="nav-item"><a class="nav-link" href="../livros/livros.html">Livros</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-12 text-center" id="titulo">
            <h1>ToDoList com Django</h1>
            <h6><strong>Software ToDoList com Django</strong></h6>
            <a href="../index.html" class="btn btn-link text-decoration-none mb-3">Voltar</a><br>
            <a href="https://github.com/mateusschwede/django" class="btn btn-link text-decoration-none" target="_blank">GitHub do projeto</a><br>
        </div>

        <div class="col-sm-12">
            <p id="textoPost">O ToDoList é um desafio muito comum solicitado por empresas, com objetivo de verificar a capacitação de possíveis candidatos à vagas em atuação na área de desenvolvimento de sistemas. O sistema ToDoList é, basicamente, um programa onde tem-se uma lista de tarefas, das quais pode-se marcar como 'completa' ou 'incompleta', além das operações tradicionais de CRUD.</p>
            
            <br><h4>Passo a passo:</h4>
            <ol>
                <br>
                <b><u>Preparo</u>:</b>
                <li><b>Instalar pip:</b> sudo apt install python3-pip</li>
                <li><b>Instalar Django:</b> pip3 install django</li>
                <li><b>Criar projeto:</b> django-admin startproject nomePastaProjeto <span class="text-muted">(Informado, nesse caso, 'todo')</span></li>
                <li><b>Criar migrations:</b> python3 manage.py migrate</li>
                <li><b>Criar usuário:</b> python3 manage.py createsuperuser <span class="text-muted">(Informar dados)</span></li>
                <li><b>Executar projeto:</b> python3 manage.py runserver <span class="text-muted">(Acessar em <a href="http://localhost:8000" class="text-decoration-none" target="_blank">http://localhost:8000</a> - Pode simplesmente trocar o ip por 'localhost')</span>
                    <ul>
                        <li>Pode-se acessar painel admin com credenciais informadas acima <span class="text-muted">(<a href="http://localhost:8000/admin" class="text-decoration-none" target="_blank">http://localhost:8000/admin</a>)</span></li>
                    </ul>
                </li>
                <li><b>No projeto, criar app:</b> python3 manage.py startapp nomeApp <span class="text-muted">(Informado, nesse caso, 'tasks')</span></li>
                <br>
                <b><u>Inicialização</u>:</b>
                <li>Em 'todo/settings.py', informar, em INSTALLED_APPS, o nome do app como último item da lista</li>
                <li>Em 'tasks/views.py', informar def index <span class="text-muted">(Informar 'from HttpResponse' também)</span></li>
                <li>Em 'tasks', criar arquivo 'urls.py', criando rota do views.index</li>
                <li>Em 'todo/urls.py', incluir 'include' no from django.urls e complementar rota admin.site.urls</li>
                <li>Testar funcionamento no browser <span class="text-muted">(runserver - Deverá mostrar 'Hello world' na tela)</span></li>
                <br>
                <b><u>Index</u>:</b>
                <li>Em 'tasks', criar pasta 'templates' com subpasta 'tasks'</li>
                <li>Dentro da pasta acima, criar arquivo 'list.html'</li>
                <li>Em 'tasks/views.py', informar rota index
                    <ul>
                        <li>Recarregar browser para conferir se rota está funcionando <span class="text-muted">(Irá para list.html)</span></li>
                    </ul>
                </li>
                <li>Em 'tasks/models.py', criar model Task <span class="text-muted">(class Task)</span></li>
                <li><b>Montar migrations (Criar model 'task'):</b> python3 manage.py makemigrations</li>
                <li><b>Criar migrations:</b> python3 manage.py migrate</li>
                <li><b>Executar projeto:</b> python3 manage.py runserver</li>
                <li>Em 'tasks/admin.py', informar 'from .models' e 'admin.site.register'
                    <ul>
                        <li>No browser, acessar painel admin (<a href="http://localhost:8000/admin" class="text-decoration-none" target="_blank">http://localhost:8000/admin</a>), mostrará novo grupo 'Tasks'</li>
                        <li>Acessar e, após, clicar em 'add task':
                            <ul>
                                <li>Title: Projeto de ToDo UB Social (Clicar em Save)</li>
                                <li>Title: Projeto de ToDo2 UB Social (Clicar em Save)</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <br>
                <b><u>Listar Tasks:</u></b>
                <li>Em 'tasks/views.py', informar 'from .models' e aprimorar view index</li>
                <li>Em 'tasks/templates/list.html', preencher template
                    <ul>
                        <li>No browser, recarregar index (<a href="http://localhost:8000" class="text-decoration-none" target="_blank">http://localhost:8000</a>) e verificar se lista de tasks adicionadas no admin serão mostradas</li>
                    </ul>
                </li>
                <br>
                <b><u>Inserir Task</u>:</b>
                <li>Em 'tasks', criar novo arquivo 'forms.py' <span class="text-muted">(Será a model TaskForm)</span>
                    <ul>
                        <li>Em 'tasks/views.py', incluir 'from .forms'</li>
                    </ul>
                </li>
                <li>Em 'tasks/templates/list.html'
                    <ul>
                        <li>No browser, recarregar index e verificar se aparece form de criação de task</li>
                    </ul>
                </li>
                <li>Em 'tasks/views.py', incluir if <span class="text-muted">(Incluir 'redirect' no from)</span>
                    <ul>
                        <li>No Browser, testar inserir alguma task</li>
                    </ul>
                </li>
                <br>
                <b><u>Editar Task</u>:</b>
                <li>Em 'tasks/templates', criar 'update_task.html'</li>
                <li>Em 'tasks/views.py', criar view updateTask <span class="text-muted">(def updateTask)</span></li>
                <li>Em 'tasks/urls.py', adicionar rota update_task <span class="text-muted">(path)</span></li>
                <li>Em tasks/templates/list.html, incluir <span class="text-muted">&lt;a&gt;Update</span>
                    <ul>
                        <li>No browser, testar editar alguma task</li>
                    </ul>
                </li>
                <br>
                <b><u>Deletar Task</u>:</b>
                <li>Em 'tasks/templates', criar 'delete.html'</li>
                <li>Em 'tasks/views.py', criar view deleteTask <span class="text-muted">(def deleteTask)</span></li>
                <li>Em 'tasks/urls.py', adicionar rota delete_task <span class="text-muted">(path)</span></li>
                <li>Em 'tasks/templates/list.html', incluir <span class="text-muted">&lt;a&gt;Delete</span>
                    <ul>
                        <li>No browser, testar deletar alguma task</li>
                    </ul>
                </li>
                <br>
                <b><u>Ver Task</u>:</b>
                <li>Em 'tasks/templates', criar 'detail_task.html'</li>
                <li>Em 'tasks/views.py', criar view detailTask <span class="text-muted">(def detailTask)</span></li>
                <li>Em 'tasks/urls.py' adicionar rota detail_task <span class="text-muted">(path)</span></li>
                <li>Em 'tasks/templates/list.html', incluir <span class="text-muted">&lt;a&gt;Detail</span>
                    <ul>
                        <li>No browser, testar ver detalhes de alguma task</li>
                    </ul>
                </li>
                
                <br>
                <b><u>Marcar Task completa/incompleta</u>:</b>
                <li>Em 'tasks/templates/list.html', incluir 'if task.complete'</li>
            </ol>

            <br>
            <h4>Arquivos:</h4>
            <br><p><b>tasks/templates/tasks/delete.html</b>:</p>
<small><pre><code>
&lt;p&gt;Excluir a task "{{item}}"?&lt;/p&gt;
&lt;a href="{% url 'list' %}"&gt;Cancelar&lt;/a&gt;
&lt;form method="POST"&gt;
    {% csrf_token %}
    &lt;input type="submit"&gt;
&lt;/form&gt;
</code></pre></small>

            <br>
            <p><b>tasks/templates/tasks/list.html</b>:</p>
<small><pre><code>
&lt;h3&gt;To do Django UB Social&lt;/h3&gt;

&lt;form method="POST"&gt;
    {% csrf_token %}
    {{form}}
    &lt;input type="submit"&gt;
&lt;/form&gt;

{% for task in tasks %}
    &lt;div&gt;
        &lt;a href="{% url 'update' task.id %}"&gt;Update&lt;/a&gt;
        &lt;a href="{% url 'detail' task.id %}"&gt;Detail&lt;/a&gt;
        &lt;a href="{% url 'delete' task.id %}"&gt;Delete&lt;/a&gt;
        {% if task.complete == True %}
            &lt;s&gt;{{task}}&lt;/s&gt;
        {% else %}
            &lt;span&gt;{{task}}&lt;/span&gt;
        {% endif %}
    &lt;/div&gt;
{% endfor %}
</code></pre></small>

            <br>
            <p><b>tasks/templates/tasks/detail.html</b>:</p>
<small><pre><code>
&lt;a href="{% url 'list' %}"&gt;Voltar&lt;/a&gt;&lt;br&gt;
&lt;div class="main"&gt;
    {{task.id}}&lt;br&gt;
    {% if task.complete == True %}
            &lt;s&gt;{{task.title}}&lt;/s&gt;
        {% else %}
            &lt;span&gt;{{task.title}}&lt;/span&gt;
    {% endif %}
&lt;/div&gt;
</code></pre></small>

            <br>
            <p><b>tasks/templates/tasks/update.html</b>:</p>
<small><pre><code>
&lt;h3&gt;Update Task&lt;/h3&gt;
&lt;form method="POST"&gt;
    {% csrf_token %}
    {{form}}
    &lt;input type="submit"&gt;
&lt;/form&gt;
</code></pre></small>

            <br>
            <p><b>admin.py</b>:</p>
<small><pre><code>
from django.contrib import admin
from .models import *

admin.site.register(Task)
</code></pre></small>

            <br>
            <p><b>apps.py</b>:</p>
<small><pre><code>
from django.apps import AppConfig

class TasksConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'tasks'
</code></pre></small>

            <br>
            <p><b>forms.py</b>:</p>
<small><pre><code>
from django import forms
from django.forms import ModelForm
from .models import *

class TaskForm(forms.ModelForm):
    class Meta:
        model = Task
        fields = '__all__'
</code></pre></small>

            <br>
            <p><b>models.py</b>:</p>
<small><pre><code>
from django.db import models

class Task(models.Model):
    title = models.CharField(max_length=200)
    complete = models.BooleanField(default=False)
    created = models.DateTimeField(auto_now_add=True)
    def __str__(self):
        return self.title
</code></pre></small>

            <br>
            <p><b>urls.py</b>:</p>
<small><pre><code>
from django.urls import path
from . import views

urlpatterns = [
    path('', views.index, name="list"),
    path('task/&lt;str:pk&gt;/', views.detailTask, name="detail"),
    path('update/&lt;str:pk&gt;/', views.updateTask, name="update"),
    path('delete/&lt;str:pk&gt;/', views.deleteTask, name="delete"),
]
</code></pre></small>

            <br>
            <p><b>views.py</b>:</p>
<small><pre><code>
from django.shortcuts import render, redirect
from django.http import HttpResponse
from .models import *
from .forms import *

def index(request):
    tasks = Task.objects.all()
    form = TaskForm()
    if request.method == 'POST':
        form = TaskForm(request.POST)
        if form.is_valid():
            form.save()
        return redirect('/')
    context = {'tasks':tasks, 'form':form}
    return render(request, 'tasks/list.html', context)

def detailTask(request, pk):
    context = {}
    context["task"] = Task.objects.get(id=pk)
    return render(request, 'tasks/detail.html', context)

def updateTask(request, pk):
    task = Task.objects.get(id=pk)
    form = TaskForm(instance=task)
    if request.method == 'POST':
        form = TaskForm(request.POST, instance=task)
        if form.is_valid():
            form.save()
            return redirect('/')
    context = {'form':form}
    return render(request, 'tasks/update.html', context)

def deleteTask(request, pk):
    item = Task.objects.get(id=pk)
    if request.method == 'POST':
        item.delete()
        return redirect('/')
    context = {'item':item}
    return render(request, 'tasks/delete.html', context)
</code></pre></small>

            <br>
            <p><b>todo/settings.py</b>:<br><small><span class="text-muted">Modificar, no arquivo original, com o trecho de código abaixo</span></small></p>
<small><pre><code>
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    <b>'tasks',</b>
]
</code></pre></small>

            <br>
            <p><b>todo/urls.py</b>:</p>
<small><pre><code>
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('tasks.urls'))
]
</code></pre></small>
        </div>
    </div>


<!--Rodapé-->
<div class="row">
    <div class="col-sm-12 text-center bg-black text-light pt-4 pb-3">
        <p>Elaborado por Mateus Schwede<br><small class="text-muted">ubsocial.github.io</small></p>
    </div>
</div>

</div>
</body>
</html>